<script lang="ts">
  import type { BroadcasterFollowData } from "../types";

  export let alert_event: BroadcasterFollowData;
</script>

<style>
  :root {
    --cb-animation: cubic-bezier(.51,.56,.11,1.03);
    --alert-display-time: 2000ms; /* will be 10000ms */
  }

  @keyframes dropDownBounce {
    0% { 
      transform: scale(1,1) translateY(-100%); 
    }
    10% { 
      transform: translateY(0); 
    }
    30% { 
      transform: translateY(-100px); 
    }
    50% { 
      transform: translateY(0); 
    }
    57% { 
      transform: translateY(-7px); 
    }
    64% { 
      transform: translateY(0); 
    }
    100% { 
      transform: translateY(0); 
    }
  }

  @keyframes dropDownCompletely {
    0% {
      transform: none;
    }
    100% {
      transform: translateY(800px);
    }
  }

  @keyframes bounceInRight {
    0% { 
      transform: translate3d(100%,0,0) scale(1,1) translateX(0); 
    }
    10% { 
      transform: scale(1.1,.9) translateX(0); 
    }
    30% { 
      transform: scale(.9,1.1) translateX(-100px); 
    }
    50% { 
      transform: scale(1,1) translateX(0); 
    }
    57% { 
      transform: scale(1,1) translateX(-7px); 
    }
    64% { 
      transform: scale(1,1) translateX(0); 
    }
    100% { 
      transform: translate3d(0,0,0) scale(1,1) translateX(0); 
    }
  }

  @keyframes slideOutLeft {
    0% {
      transform: none;
    }
    100% {
      transform: translate3d(-100%,0,0);
    }
  }

  @keyframes growAndRotate {
    0% {
      width: 0;
      transform: rotate(360deg)  translateY(-200px);
    }
    100% {
      width: 300px;
      transform: none;
    }
  }

  @keyframes shrinkAndRotateAndUp {
    0% {
      width: 300px;
      transform: none;
    }
    100% {
      width: 0;
      transform: rotate(360deg) translateY(-200px);
    }
  }

  @keyframes scrollUpSlowly {
    0% {
      background-position: center 0;
    }
    100% {
      background-position: center -160px;
    }
  }

  .alert {
    text-align: center;
    width: 500px;
    display: flex;
    flex-direction: column;
  }

  .alert__logo {
    animation: growAndRotate 0.6s var(--cb-animation), shrinkAndRotateAndUp 0.5s ease var(--alert-display-time) forwards;
    margin-left: auto;
    margin-right: auto;
    display: flex;
    left: 0;
    right: 0;
    top: 100px;
    position: absolute;
    z-index: 1;
    border-radius: 50%;
    background-color: var(--black);
    padding: 1rem;
    border: 0.5rem solid var(--yellow);
  }

  .alert__nameContainer {
    animation: bounceInRight 1s var(--cb-animation), scrollUpSlowly 20s var(--cb-animation), slideOutLeft 0.5s ease var(--alert-display-time) forwards;
    margin-left: auto;
    margin-right: auto;
    display: block;
    border-top: 6px solid var(--black);
    border-bottom: 6px solid var(--black);
    position: absolute;
    left: 0;
    right: 0;
    bottom: 38%;
    padding: 3rem 1.25rem 1rem 1.25rem;
    background-color: var(--red);
    background-image: url("/assets/svg/bg-red.svg");
    background-size: cover;
  }

  .alert__name {
    font-family: var(--font-family-alt);
    font-size: 3rem;
    font-weight: var(--font-weight-bold);
    color: var(--white);
    text-shadow: 0.125rem 0.125rem 6px var(--black);
  }

  .alert__subtitle {
    margin-left: auto;
    margin-right: auto;
    display: block;
    font-family: var(--font-family-heading);
    text-transform: uppercase;
    font-size: 4rem;
    fill: var(--black);
  }

  .alert__banner {
    animation: dropDownBounce 0.8s ease-in-out, dropDownCompletely 0.5s ease var(--alert-display-time) forwards;
    width: 100%;
    z-index: 2;
  }

  .alert__bannerImage {
    width: 100%;
    margin-top: 280px;
  }

  .alert__bannerTextPath {
    overflow: visible;
    position: relative;
    bottom: 192px;
    width: 100%;
  }
</style>

<div class="alert">  
  <div class="alert__banner">
    <svg class="alert__bannerImage" width="800" height="244" viewBox="0 0 800 244" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path id="curve" d="M20.6036 28.6001L22.4333 26.1776C32.5533 12.811 46.847 5.45809 66.1149 3.71959C127.235 -1.83792 173.204 23.8976 213.741 46.6121C221.031 50.6876 228.035 54.5351 234.924 58.2686C284.609 84.6312 331.35 106.348 400.046 105.921H402.904C470.428 105.921 516.654 84.3462 565.853 58.2686C572.857 54.5351 579.747 50.6591 587.065 46.5836C627.602 23.7836 673.571 -1.86649 734.663 3.83352C753.93 5.57203 768.224 12.9251 778.344 26.2916L780.174 28.7141L779.716 31.5641C776.858 50.5166 777.429 71.4642 778.087 91.7847C778.459 103.47 778.802 114.585 778.516 125.044L778.344 130.972L772.455 131.884C767.281 132.682 762.421 130.06 757.733 127.552C755.162 125.999 752.393 124.801 749.499 123.99C743.743 123.335 737.931 123.335 732.175 123.99C707.562 126.412 679.86 139.836 653.617 153.373L647.585 156.48C579.232 191.734 501.989 228.727 413.167 240.298L391.727 240.84C301.247 229.981 222.603 192.39 153.193 156.451L147.189 153.373C120.946 139.836 93.2731 126.412 68.6307 123.99C62.8738 123.35 57.0635 123.35 51.3066 123.99C48.4133 124.801 45.6437 125.999 43.0734 127.552C38.385 130.06 33.5253 132.682 28.3509 131.884L22.4619 130.972L22.2904 125.044C22.0045 114.471 22.2903 103.47 22.7191 91.7847C23.3766 71.5212 24.0627 50.5166 21.0896 31.5641L20.6036 28.6001Z" fill="white"/>
      <path fill-rule="evenodd" clip-rule="evenodd" d="M763.506 136.359C760.275 155.939 733.918 155.996 715.85 163.89C698.898 171.3 681.545 181.959 672.083 194.015C664.507 203.591 650.214 232.974 674.656 235.967C633.776 243.291 653.558 186.405 650.185 158.646C675.771 146.22 732.917 110.795 763.506 136.359Z" fill="white"/>
      <path fill-rule="evenodd" clip-rule="evenodd" d="M762.222 157.22C767.254 178.766 781.147 191.42 787.951 210.971C754.761 178.595 708.621 228.698 670.742 225.392C677.232 178.282 726.688 174.919 762.222 157.22Z" fill="white"/>
      <path fill-rule="evenodd" clip-rule="evenodd" d="M37.2126 136.359C40.443 155.939 66.8293 155.996 84.868 163.89C101.849 171.3 119.173 181.959 128.635 194.015C136.211 203.591 150.533 232.974 126.063 235.967C166.943 243.291 147.16 186.405 150.534 158.646C124.862 146.22 67.7155 110.795 37.2126 136.359Z" fill="white"/>
      <path fill-rule="evenodd" clip-rule="evenodd" d="M38.4145 157.22C33.3831 178.766 19.4896 191.42 12.6857 210.971C45.8758 178.595 91.9875 228.698 129.895 225.392C123.405 178.282 73.9488 174.919 38.4145 157.22Z" fill="white"/>
      <path fill-rule="evenodd" clip-rule="evenodd" d="M0.048645 217.498C3.42194 191.991 26.1204 179.223 28.093 156.024C28.8648 147.046 21.5464 137.527 20.3743 127.182C18.9449 114.727 21.3177 96.6012 21.6608 77.3922C21.9467 61.2897 15.9433 42.3371 19.0879 28.9421C21.3177 19.1666 37.6412 8.99208 47.4182 5.34408C77.8638 -6.48345 118.401 3.6626 146.56 13.2101C234.095 42.9072 287.496 103.926 400.217 103.641C512.937 103.926 566.339 42.9072 653.874 13.2101C682.032 3.6626 722.484 -6.48345 753.015 5.34408C762.792 9.13458 779.115 19.1666 781.345 28.9421C784.433 42.3941 778.487 61.3467 778.772 77.3922C779.115 96.6012 781.488 114.727 780.087 127.182C778.887 137.527 771.511 147.132 772.34 156.024C774.198 177.855 794.41 190.452 799.613 213.024C800.081 215.093 800.125 217.235 799.742 219.322C799.359 221.408 798.556 223.396 797.383 225.165C796.804 226 796.016 226.67 795.098 227.109C794.18 227.548 793.163 227.741 792.148 227.67C791.132 227.598 790.153 227.263 789.306 226.699C788.46 226.135 787.775 225.361 787.32 224.453C784.383 218.569 779.565 213.826 773.627 210.972C732.461 195.154 692.895 254.577 657.733 242.322C630.289 232.831 644.497 190.851 642.296 163.69C573.686 196.807 498.958 235.169 401.56 243.491L397.415 243.348H397.015C300.475 234.798 226.347 196.608 158.023 163.548C155.822 190.708 170.059 232.689 142.586 242.18C107.423 254.321 67.8868 194.898 26.6922 210.829C21.5262 213.269 17.2067 217.189 14.2852 222.087C13.6025 223.2 12.6489 224.123 11.513 224.771C10.3771 225.419 9.09564 225.771 7.78717 225.793C6.4787 225.816 5.18567 225.509 4.02783 224.901C2.87 224.293 1.88483 223.404 1.16357 222.315C0.247742 220.885 -0.146057 219.184 0.048645 217.498ZM787.92 211.058C781.117 191.364 767.223 178.852 762.192 157.306C726.657 174.919 677.201 178.282 670.712 225.479C708.619 228.785 754.759 178.681 787.949 211.058H787.92ZM674.714 235.967C650.272 232.974 664.565 203.59 672.141 194.014C681.689 181.959 698.956 171.214 715.908 163.89C733.976 155.995 760.333 155.938 763.564 136.359C732.975 110.709 675.829 146.22 650.243 158.646C653.559 186.405 633.777 243.291 674.714 235.967ZM397.729 236.993C398.139 237.022 398.549 237.022 398.959 236.993H402.189H403.304C497.1 226.932 577.688 184.267 650.243 146.875C675.171 134.022 704.759 119.373 731.374 116.722C737.786 115.995 744.259 115.995 750.671 116.722C758.161 118.062 766.051 125.272 771.282 124.588C772.111 95.6037 767.795 60.7197 772.569 30.2247C763.449 18.1976 750.871 12.0986 733.947 10.5881C664.765 4.28956 616.738 38.9456 569.112 64.3107C519.312 90.7302 472.114 112.932 402.189 112.761H398.158C328.462 112.761 281.321 90.7017 231.636 64.3107C183.895 38.9456 135.982 4.28956 66.8005 10.5881C49.8766 12.0986 37.2982 18.1976 28.1787 30.2247C32.9528 60.7197 28.6362 95.6037 29.4652 124.588C34.6967 125.386 42.5869 118.062 50.0768 116.722C56.4882 115.995 62.9619 115.995 69.3734 116.722C96.0169 119.373 125.576 134.022 150.505 146.875C223.031 184.296 303.734 226.989 397.672 237.021L397.729 236.993ZM150.505 158.646C124.919 146.22 67.801 110.794 37.1838 136.359C40.4142 155.938 66.8005 155.995 84.8392 163.89C101.82 171.3 119.144 181.959 128.607 194.014C136.182 203.59 150.505 232.974 126.034 235.967C166.857 243.291 147.074 186.405 150.448 158.646H150.505ZM129.836 225.621C123.404 178.425 73.9473 175.062 38.3558 157.449C33.3245 178.995 19.4309 191.649 12.6271 211.2C45.7886 178.681 91.9861 228.785 129.836 225.621Z" fill="black"/>
    </svg>
    
    <svg class="alert__bannerTextPath" width="800" height="244" viewBox="0 0 800 244" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path id="curve" d="M20.6036 28.6001L22.4333 26.1776C32.5533 12.811 46.847 5.45809 66.1149 3.71959C127.235 -1.83792 173.204 23.8976 213.741 46.6121C221.031 50.6876 228.035 54.5351 234.924 58.2686C284.609 84.6312 331.35 106.348 400.046 105.921H402.904C470.428 105.921 516.654 84.3462 565.853 58.2686C572.857 54.5351 579.747 50.6591 587.065 46.5836C627.602 23.7836 673.571 -1.86649 734.663 3.83352C753.93 5.57203 768.224 12.9251 778.344 26.2916L780.174 28.7141L779.716 31.5641C776.858 50.5166 777.429 71.4642 778.087 91.7847C778.459 103.47 778.802 114.585 778.516 125.044L778.344 130.972L772.455 131.884C767.281 132.682 762.421 130.06 757.733 127.552C755.162 125.999 752.393 124.801 749.499 123.99C743.743 123.335 737.931 123.335 732.175 123.99C707.562 126.412 679.86 139.836 653.617 153.373L647.585 156.48C579.232 191.734 501.989 228.727 413.167 240.298L391.727 240.84C301.247 229.981 222.603 192.39 153.193 156.451L147.189 153.373C120.946 139.836 93.2731 126.412 68.6307 123.99C62.8738 123.35 57.0635 123.35 51.3066 123.99C48.4133 124.801 45.6437 125.999 43.0734 127.552C38.385 130.06 33.5253 132.682 28.3509 131.884L22.4619 130.972L22.2904 125.044C22.0045 114.471 22.2903 103.47 22.7191 91.7847C23.3766 71.5212 24.0627 50.5166 21.0896 31.5641L20.6036 28.6001Z" fill="transparent" />
      <text class="alert__subtitle" width="800">
        <textPath xlink:href="#curve">
          &nbsp; &nbsp; • New follower •
        </textPath>
      </text>  
    </svg>
  </div>
    
  <img src={alert_event.logoUrl} alt={alert_event.followerName} class="alert__logo" />

  <h1 class="alert__nameContainer">
    <span class="alert__name">
      {alert_event.followerName}
    </span>
  </h1>
</div>